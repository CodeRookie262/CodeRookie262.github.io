<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>绑定this的几种骚操作 | 进击的切图仔</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.a813c5fa.css" as="style"><link rel="preload" href="/assets/js/app.545fc9af.js" as="script"><link rel="preload" href="/assets/js/2.a898427a.js" as="script"><link rel="preload" href="/assets/js/14.84403a75.js" as="script"><link rel="preload" href="/assets/js/5.d053370d.js" as="script"><link rel="prefetch" href="/assets/js/10.c0413819.js"><link rel="prefetch" href="/assets/js/11.c1a38194.js"><link rel="prefetch" href="/assets/js/12.a0d683fb.js"><link rel="prefetch" href="/assets/js/13.37a09744.js"><link rel="prefetch" href="/assets/js/15.c3293264.js"><link rel="prefetch" href="/assets/js/16.2b2219f9.js"><link rel="prefetch" href="/assets/js/17.714a13e7.js"><link rel="prefetch" href="/assets/js/18.78a686ae.js"><link rel="prefetch" href="/assets/js/19.979d043d.js"><link rel="prefetch" href="/assets/js/20.8a99291d.js"><link rel="prefetch" href="/assets/js/21.6d251f84.js"><link rel="prefetch" href="/assets/js/22.a3a55fb0.js"><link rel="prefetch" href="/assets/js/23.de616130.js"><link rel="prefetch" href="/assets/js/24.3cca3045.js"><link rel="prefetch" href="/assets/js/25.1ef76cd4.js"><link rel="prefetch" href="/assets/js/26.35007419.js"><link rel="prefetch" href="/assets/js/27.c0e1a3bc.js"><link rel="prefetch" href="/assets/js/3.0ed5a1b7.js"><link rel="prefetch" href="/assets/js/4.bcd97617.js"><link rel="prefetch" href="/assets/js/6.b9d7e6bb.js"><link rel="prefetch" href="/assets/js/7.11df48cc.js"><link rel="prefetch" href="/assets/js/8.71eb46b3.js"><link rel="prefetch" href="/assets/js/9.b342fba9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a813c5fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">进击的切图仔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">推荐·博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/new.html" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/new.html" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/HTML5/new.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/new.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/数据结构/new.html" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/blog/闲聊/new.html" class="nav-link">闲聊</a></li></ul></div></div><div class="nav-item"><a href="/question/new.html" class="nav-link">Daily question</a></div> <a href="https://github.com/CodeRookie262" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">推荐·博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/new.html" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/new.html" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/HTML5/new.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/new.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/数据结构/new.html" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/blog/闲聊/new.html" class="nav-link">闲聊</a></li></ul></div></div><div class="nav-item"><a href="/question/new.html" class="nav-link">Daily question</a></div> <a href="https://github.com/CodeRookie262" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Blog</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>HTML 5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/JS/0到1封装Promise.html" class="sidebar-link">0到1封装Promise</a></li><li><a href="/blog/JS/new.html" class="sidebar-link">利用&quot;交叉观察者&quot;轻松实现触底加载, 懒加载以及吸顶盒</a></li><li><a href="/blog/JS/别问,问就得承诺Promise.html" class="sidebar-link">别问,问就得承诺(Promise)</a></li><li><a href="/blog/JS/深入浅出之什么是迭代器.html" class="sidebar-link">什么是迭代器</a></li><li><a href="/blog/JS/深入浅出高阶函数☕️.html" class="sidebar-link">深入浅出 高阶函数 ☕️</a></li><li><a href="/blog/JS/花式绑定this全面解析.html" class="active sidebar-link">绑定this的几种骚操作</a></li><li><a href="/blog/JS/高能挑战JavaScript.html" class="sidebar-link">极限挑战 JS ,你对了多少道!</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>闲聊</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Question</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="绑定this的几种骚操作"><a href="#绑定this的几种骚操作" aria-hidden="true" class="header-anchor">#</a> 绑定this的几种骚操作</h1> <p>    在学习 <code>JavaScript</code> 的道路上,想必很多人都遇到过一个神级巨坑,那就是<code>什么是this</code>,<code>为什么要用this</code>和<code>this怎么用</code>;用我们的话来说就是<code>我是谁,我在哪,我在干什么</code></p> <p>     对this指向不熟悉的开发者常常因为不明白<code>this</code>的动态指向而苦恼,这篇文章主要讲的是如何绑定<code>this</code>,让<code>this</code>为我所用</p> <blockquote><h4 id="什么是-this"><a href="#什么是-this" aria-hidden="true" class="header-anchor">#</a> 什么是 this</h4></blockquote> <p><code>this</code>是一个很特别的关键字，被自动定义在
所有函数的作用域中. 简单来说，<code>this</code>代表的是你当前函数的上下文对象，因此<code>this</code>实际上指向的是其被调用的位置，而不是其词法作用域，所以说，调用方式的不同，实际上最后呈现的结果也是不一样的。</p> <blockquote><h4 id="为什么要用-this"><a href="#为什么要用-this" aria-hidden="true" class="header-anchor">#</a> 为什么要用 this</h4></blockquote> <p>先给大伙看两段代码对比下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">var</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    btn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        btn1<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'已点击'</span>
    <span class="token punctuation">}</span>    
    
    btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        btn2<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'已点击'</span>
    <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>this版</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">var</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">function</span> <span class="token function">clickBtn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'已点击'</span>
    <span class="token punctuation">}</span>
    
    btn1<span class="token punctuation">.</span>onclick <span class="token operator">=</span> clickBtn
    btn2<span class="token punctuation">.</span>onclick <span class="token operator">=</span> clickBtn
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>对比上面两段代码,想必知道为何要使用<code>this</code>了吧.this的使用使我们的开发改为事半功倍</p> <p>如果不懂<code>this</code>指向的,可以这样理解:
<strong>谁特么地调用了我，我就是谁的对象，谁特么地最后调用了我，我就是谁的对象。</strong></p> <blockquote><h4 id="this的绑定方式"><a href="#this的绑定方式" aria-hidden="true" class="header-anchor">#</a> this的绑定方式</h4></blockquote> <p><code>this</code>的绑定有下列5种方式:</p> <ul><li>默认绑定</li> <li>隐式绑定</li> <li>显示绑定</li> <li>new 绑定</li> <li>箭头函数绑定</li></ul> <blockquote><p><strong>默认绑定</strong></p></blockquote> <p><strong>默认绑定</strong> 实际上就是将函数独立执行, 而并非通过事件绑定或者<code>call</code>,<code>apply</code>和<code>bind</code>绑定调用的情况下, 函数内部<code>this</code>指向<code>顶层对象 window</code>; 但是有一个点需要注意, 就是在严格模式下 <code>use strict</code> 下, 函数独立执行时,内部的 <code>this</code> 指向就不再是 <code>window</code>, 而是 <code>undefined</code>, 只有函数运行在 <strong>非严格模式</strong> 下,默认绑定才可以绑定到 <code>window</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
    <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p><strong>隐式绑定</strong></p></blockquote> <p>    当函数引用有 <strong>上下文对象</strong>(上下文 =&gt; 当前环境)时, 隐式绑定会把函数中的 this 绑定到这个对象上.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span> <span class="token number">233</span><span class="token punctuation">,</span>
        <span class="token function-variable function">fun</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    obj<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 233</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>隐式丢失</p></blockquote> <p>    被隐式绑定的函数特定情况下回丢失掉绑定的对象, 变成默认绑定, 把 this 的引用指向到 window 或者 undefined (严格模式)</p> <p>案例一 : 为函数调用创建别名</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        v<span class="token punctuation">:</span> <span class="token string">'我是obj'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">fun</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token string">'我是v'</span><span class="token punctuation">,</span>
        bar <span class="token operator">=</span> obj<span class="token punctuation">.</span>fun<span class="token punctuation">;</span>
    
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// '我是v'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>虽然bar是obj.fun的一个引用，但是bar引用的是obj.fun这个函数的本身，此时的bar()其实就是一个不带任何修饰的函数调用，所以应用了默认绑定，this为全局</p></blockquote> <p>案例二 : 传入回调函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">//案例一代码插入</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">fn</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>fun<span class="token punctuation">)</span> <span class="token comment">// '我是v'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>参数传递其实就是隐式赋值。相当于var cb=obj.foo，与创建别名的结果一样，应用了默认绑定，应该注意的是，return返回一个函数时，也是应用了默认绑定</p></blockquote> <p>案例三: 传入语言内置的函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">//案例一代码插入</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>fun<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// '我是v'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>同案例二</p></blockquote> <p>    在隐式绑定情况下, 时常会有发生隐式丢失, 说到底,就是看你函数的最终调用方式, 还是那句话 <strong>谁特么地最后调用了我，我就是谁的对象。</strong></p> <blockquote><p><strong>显示绑定</strong></p></blockquote> <p>    通过call(..), apply(..) 或者 bind(...)(...) 方法. 第一个参数是一个对象, 在调用函数时将这个对象绑定到this. 因为直接指定this的绑定对象, 称之为显示绑定.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">&quot;我是obj&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    a <span class="token operator">=</span> <span class="token string">&quot;我是window&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// '我是window'</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">// '我是obj'</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">// '我是obj'</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// '我是obj'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>MDN 相关文档介绍</p></blockquote> <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener noreferrer">Function.prototype.bind()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer">Function.prototype.apply()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">Function.prototype.call()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>    使用<code>bind()</code>,<code>call()</code>和<code>apply()</code>时, 要切记,第一个参数为<code>thisArg</code>,也就是传入一个对象, 此对象即是函数体内部this的引用. 如果传入的值为  <code>undefined</code> 或 <code>null</code> 表不改变原有的this引用, 也就是函数会保持原有的上下文对象</p> <p>    还有一个坑, 涉及到柯里化的,就是一个函数,  不论你<code>bind(...)</code>,<code>call(...)</code>和<code>apply(...)</code>, 函数的上下文对象始终是第一个绑定的对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'obj'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    a <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
    
<span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">demo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'obj'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>    还有一个神级巨坑,就是箭头函数不受 <code>bind(...)</code>,<code>call(...)</code>和<code>apply(...)</code> 的影响(约束), 它始终保持它原有的上下文对象</p> <blockquote><p><strong>new 绑定</strong></p></blockquote> <ul><li>在 js 中, 构造函数是 <code>new</code> 操作符是被调用的普通函数而已,它们不属于某个类, 也不会实例化一个类.</li> <li>包括 js 的内置对象函数( String,Number... ) 在内的所有函数都可以用 <code>new</code> 来调用, 这种函数调用称之为 &quot;<strong>构造函数调用</strong>&quot;</li> <li>实际上不存在&quot;构造函数&quot;, 只有对函数的 &quot;<strong>构造调用</strong>&quot;</li></ul> <p>使用 <code>new</code> 调用函数时, 函数体内部会有以下几个步骤:</p> <ul><li>在函数体内部创建一个对象</li> <li>这个对象会被执行 [[Prototype]] 连接</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>函数体内部的 <code>this</code> 指向实例化时构造函数内部创建的那个新对象</li> <li>如果构造函数没有返回其他对象,那么 <code>new</code> 的构造函数会自动返回这个新对象</li></ul> <blockquote><p>百说不如一试</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token string">'切图仔'</span><span class="token punctuation">,</span> <span class="token string">'小哥哥'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token comment">/*
    {
        name: '切图仔',
        sex: '小哥哥',
        age: 30
    }
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>    在这里可能就会有些好奇心比较重的人想说, 我可以封装一个和 <code>new</code> 实例化一个对象的函数出来吗?</p> <blockquote><p>答案是: 可以的</p></blockquote> <blockquote><p>手动实现 new 操作符</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Instantiation</span><span class="token punctuation">(</span><span class="token parameter">Constructor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//创建一个新的对象当做实例对象</span>
        <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将实例对象的 __proto__ 与 Constructor 的 prototype 进行连接,这样 object 就可以访问到构造函数原型上的属性了</span>
        object<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Constructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
        <span class="token comment">//绑定构造函数内部 this,在进行传参</span>
        <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">Constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">//如果构造函数没有返回其他对象,那么 Instantiation函数就返回这个新对象</span>
        <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token punctuation">:</span> object<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><strong>箭头函数绑定</strong></p></blockquote> <p>    ES6 新增一种比较特殊的函数类型,那就是箭头函数, 箭头函数无法使用以上四种 this 绑定的进行绑定 this 的指向, 而是根据函数外层( 函数或者全局 ) 作用域来决定 this .</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 1  可以看到没有啥卵用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>    这就有趣了,如果又有人就喜欢钻牛角尖 ( 我不管我不管! 我就要改变箭头函数的 this );</p> <p>    首先, 我们先给他来一巴掌(以上切勿模仿,我们都是文明人~) 然后开始我们的代码优化一下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//根据函数外层( 函数或者全局 ) 作用域来决定 this,将箭头函数以闭包的方式返回出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2 哈哈,成功实现</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>    以上就是关于 <code>this</code> 的 5 种绑定方法, 你是否学到了.
    觉得不错的话,欢迎来个关注和分享,实时获取最新消息和让更多志同道合的小伙伴一起在前端路上学习,共勉!</p> <section style="border-top:2px solid #eaecef;padding-top:1rem;margin-top:2rem;"><div><span data-flag-title="Your Article Title" class="leancloud-visitors"><em class="post-meta-item-text">阅读量： </em> <i class="leancloud-visitors-count"></i></span></div> <h3><a href="javascript:;"></a>
    评 论：
  </h3> <div id="vcomments"></div></section></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/JS/深入浅出高阶函数☕️.html" class="prev">深入浅出 高阶函数 ☕️</a></span> <span class="next"><a href="/blog/JS/高能挑战JavaScript.html">极限挑战 JS ,你对了多少道!</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.545fc9af.js" defer></script><script src="/assets/js/2.a898427a.js" defer></script><script src="/assets/js/14.84403a75.js" defer></script><script src="/assets/js/5.d053370d.js" defer></script>
  </body>
</html>
